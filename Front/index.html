<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COVISAB | Inicio </title>
    <link rel="stylesheet" href="../Assets/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header -->
    <header id="header">
        <img src="../Assets/img/cooperativas-vector-logo.png" alt="Logo de cooperativa">
        <nav>
            <ul>
                <li><a href="#header"> Inicio</a></li>
                <li><a href="#beneficios"> Beneficios</a></li>
                <li><a href="#informacionYRegistro"> Contacto</a></li>
                <li><a href="#informacionYRegistro"> Registro</a></li>
                <li><a href="./pages/login.html"> Inicio Sesion</a></li>
                <li><a href="#footer"> Redes</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <div class="heroSection">
        <img src="../Assets/img/COOPERATIVA.jpg" alt="imagen hero">
        <div class="overlay"></div>
        <h1><span class="espacio">COVISAB</span> más que una cooperativa</h1>
    </div>

    <div class="incentivoFormulario">
        <h2>Conoce los Beneficios de formar parte de COVISAB</h2>
        <div class="separadorDeContenido"></div>
        <!-- Cooperativa de Viviendas Servicios Altruistas Basicos-->
    </div>

    <!-- Articulos sobre los Beneficios de la Cooperativa -->
    <section id="beneficios">

        <article class="beneficiosCooperativa">
            <span class="icono"> <img src="../Assets/img/deposito.svg" alt="Asesoramiento con dinero" width="90px"
                    height="90px"></span>
            <h2>Financiamiento Accesible</h2>
            <p>Ofrecemos créditos con condiciones justas y plazos flexibles. Sin intereses abusivos ni trámites
                complicados, te ayudamos con apoyo real y cercano.</p>
            <button>Conoce mas</button>
        </article>

        <article class="beneficiosCooperativa">
            <span class="icono"><img src="../Assets/img/handshake.svg" alt="Apreton de manos" width="100px"
                    height="100px"></span>
            <h2>Acompañamiento Personalizado</h2>
            <p>No estás solo: nuestro equipo te guía desde el inicio. Te brindamos asesoramiento claro y humano para que
                tomes decisiones seguras, adaptadas a tu situación.</p>
            <button>Conoce mas</button>
        </article>

        <article class="beneficiosCooperativa">
            <span class="icono"><img src="../Assets/img/billetera.svg" alt="Billetera" width="90px"
                    height="90px"></span>
            <h2>Ganancias Compartidas</h2>
            <p>En nuestra cooperativa, las ganancias se devuelven a los socios o se reinvierten en proyectos comunes.
                Participar es construir y crecer en comunidad.</p>
            <button>Conoce mas</button>
        </article>
    </section>

    <div id="informacionYRegistro">
        <div class="informacionContacto">
            <h3>¿Querés formar parte de <span class="espacio">nuestra cooperativa?</span></h2>
                <h4>Completá el formulario y envia tu solicitud para poder ser parte de los socios de COVISAB y asi
                    disfrutar beneficios exclusivos
            </h3>

            <ul>
                <li><span><img src="../Assets/img/correo.svg" alt="Correo" width="40px" height="40px"></span>
                    E-Mail:
                    correo@correo.com</li>
                <li><span><img src="../Assets/img/telefono.svg" alt="Telefono" width="40px"
                            height="40px"></span>Telefono: +598 99 123 456</li>
                <li><span><img src="../Assets/img/casa.svg" alt="Local" width="40px" height="40px"></span>Sucursal:
                    Calle ficticia S86 M95</li>
            </ul>
        </div>


        <!-- Formulario de Registro -->
        <form id="formLanding" method="POST" enctype="multipart/form-data" action="http://localhost/API_restful_js/API/api.php/usuarios" method="POST">
            <div>
                <h2>Formulario de <span class="espacio">Registro</span></h2>
            </div>
            <div class="nombreYApellido">
                <label for="usr_nombre" placeholder="Nombre">Nombre:</label>
                <label for="usr_apellido" placeholder="Apellido">Apellido:</label>
                <input required name="usr_nombre" id="usr_nombre" type="text" placeholder="Ryan"
                    pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]{2,40}$" title="Ingrese su nombre">
                <input required name="usr_apellido" id="usr_apellido" type="text" placeholder="Breaux"
                    pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]{2,40}$" title="Ingrese su apellido">

            </div>

            <label for="usr_ci">Cedula de Identidad:</label>
            <input required name="usr_ci" id="usr_ci" type="text" placeholder="12345678" pattern="^\d{8}$"
                title="Ingrese su CI sin puntos ni guiones">

            <label for="usr_nac">Fecha de Nacimiento:</label>
            <input required name="usr_nac" id="usr_nac" type="date" title="Ingrese su fecha de nacimiento">

            <label for="usr_email">Correo Electronico:</label>
            <input required name="usr_email" id="usr_email" type="email" placeholder="ejemplo@gmail.com"
                title="Ingrese su correo electronico">

            <label for="usr_pass">Contraseña:</label>
            <input required name="usr_pass" id="usr_pass" type="password" placeholder="********"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                title="Debe contener al menos 8 caracteres, una letra mayúscula, una minúscula y un número">

            <label for="usr_passVer">Confirmcion de Contraseña:</label>
            <input required name="usr_passVer" id="usr_passVer" type="password" placeholder="********"
                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                title="Debe contener al menos 8 caracteres, una letra mayúscula, una minúscula y un número">

            <label for="usr_tel">Telefono:</label>
            <input required name="usr_tel" id="usr_tel" type="tel" placeholder="092456789" pattern="^\d{9}$"
                title="Ingrese su numero de telefono, debe cumplir con el formato indicado en la plantilla de ejemplo">

            <div class="terminosCondiciones">
                <input required name="chkTerms" id="chkTerms" type="checkbox">
                <h2>He leido y acepto los <a href="./pages/#">terminos y condiciones</a> de COVISAB</h2>
            </div>

            <label for="imagen">Imagen</label>
            <input type="file" id="imagen" name="imagen" accept="image/*">

            <button type="submit">Enviar Solicitud</button>
        </form>
    </div>

    <div id="testBody" class="row rounded mx-auto m-4 text-center"></div>
    </div>



    <!-- Footer -->
    <footer id="footer">

        <div class="seccionesFooter">
            <div class="informacionYRedes">
                <img src="../Assets/img/cooperativas-vector-logo.png" alt="logoCooperativa" height="60px" width="60px">
                <p>Más que una cooperativa, una comunidad<span class="espacio">comprometida con el desarrollo de
                        nuestros</span>socios y el bienestar colectivo.</p>
                <ul>
                    <li><a href="https://facebook.com" target="_blank"><img src="../Assets/img/logoFacebook.svg"
                                alt="Facebook" width="30px" height="30px"></a></li>
                    <li><a href="https://instagram.com" target="_blank"><img src="../Assets/img/logoInstagram.svg"
                                alt="Instagram" width="30px" height="30px"></a></li>
                    <li><a href="https://x.com" target="_blank"><img src="../Assets/img/logoX.svg" alt="X" width="30px"
                                height="30px"></a></li>
                </ul>

            </div>
            <div class="enlacesRapidos">
                <h2>Enlaces</h2>
                <ul>
                    <li><a href="./index.html">Inicio</a></li>
                    <li><a href="#beneficios"> Beneficios</a></li>
                    <li><a href="#informacionYRegistro">Registro</a></li>
                    <li><a href="./pages/login.html">Inicio Sesion</a></li>
                    <li><a href="#informacionYRegistro"> Contacto</a></li>
                    <li><a href="#footer"> Redes</a></li>
                </ul>
            </div>

            <div class="contactoFooter">
                <h2>Contacto</h2>
                <ul>
                    <li><span><img src="../Assets/img/correo.svg" alt="Correo" width="25px"
                                height="25px"></span>E-Mail:correo@correo.com</li>
                    <li><span><img src="../Assets/img/telefono.svg" alt="Telefono" width="25px"
                                height="25px"></span>Telefono: +598 99 123 456</li>
                    <li><span><img src="../Assets/img/casa.svg" alt="Local" width="25px" height="25px"></span>Sucursal:
                        Calle ficticia S86 M95</li>
                </ul>
            </div>
        </div>
        <div class="derechosReservados">
            <p>PLP Tech 2025 todos los derechos reservados</p>
        </div>

    </footer>

    <!-- Solicitud POST para añadir un nuevo usuario a la API -->
    <script>
        document.getElementById('formLanding').addEventListener('submit', function (e) {
            e.preventDefault();
            const form = e.target;
            const fileInput = form.imagen;
            const file = fileInput.files[0];

            const reader = new FileReader();
            reader.onload = function (event) {
                const data = {
                    usr_nombre: form.usr_nombre.value,
                    usr_apellido: form.usr_apellido.value,
                    usr_ci: form.usr_ci.value,
                    usr_nac: form.usr_nac.value,
                    usr_email: form.usr_email.value,
                    usr_pass: form.usr_pass.value,
                    usr_tel: form.usr_tel.value,
                    imagen: event.target.result // base64
                };

                console.log(JSON.stringify(data));

                fetch('http://localhost/programacionFullStack/Back/API_Usuarios/api.php/usuarios', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(data => {
                        alert('Usuario registrado correctamente');
                        location.reload();
                    })
                    .catch(error => {
                        alert('Error al registrar usuario');
                        console.error(error);
                    });
            };
            reader.readAsDataURL(file);
        });
    </script>

    <!-- Solicitud GET para obtener los usuarios de la API -->
    <script>
        // Define la URL de la API
        const apiUrl = 'http://localhost/programacionFullStack/Back/API_Usuarios/api.php/usuarios';
        // Ejecuta la solicitud GET a la API para obtener los usuarios
        fetch(apiUrl)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                // Llama a la función para cargar los usuarios en la tabla HTML
                loadUsuarios(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    </script>

    <!-- Función para cargar los usuarios en una tabla HTML -->
    <script>
        function loadUsuarios(data) {
            // Crea una tabla HTML para mostrar los usuarios
            var table = document.createElement("table");
            table.border = "1";
            // Añade una fila de encabezado a la tabla.
            var row = table.insertRow(-1);
            // Añade las celdas de encabezado.
            var headerCell = document.createElement("TH");
            headerCell.innerHTML = "ID";
            row.appendChild(headerCell);
            headerCell = document.createElement("TH");
            headerCell.innerHTML = "Nombre";
            row.appendChild(headerCell);
            headerCell = document.createElement("TH");
            headerCell.innerHTML = "Email";
            row.appendChild(headerCell);
            headerCell = document.createElement("TH");
            headerCell.innerHTML = "Imágen";
            row.appendChild(headerCell);
            // Añade las filas de datos a la tabla.
            for (var i = 0; i < data.length; i++) {
                // Crea una nueva fila para cada usuario.
                var row = table.insertRow(-1);
                // Añade las celdas de datos a la fila.
                var cell = row.insertCell(-1);
                cell.innerHTML = data[i].id;
                cell = row.insertCell(-1);
                cell.innerHTML = data[i].usr_nombre;
                cell = row.insertCell(-1);
                cell.innerHTML = data[i].usr_email;
                cell = row.insertCell(-1);
                cell.innerHTML = "<img src='http://localhost/programacionFullStack/Back/API_Usuarios/uploads/" + data[i].imagen + "' alt='Imagen de usuario' style='width: 100px; height: auto;'>";
            }
            var dvTable = document.getElementById("testBody");
            // Limpia el contenido del div y añade la tabla.
            dvTable.innerHTML = "";
            // Añade la tabla al elemento con id "testBody".
            dvTable.appendChild(table);
        }
    </script>
</body>

</html>